(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-abe1750c"],{"8a1f":function(e,r,t){"use strict";t("96cf");var s=t("3b8d"),n=t("b255"),o=t("2b0e");r["a"]={methods:{checkName:function(e){var r=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(s,o){var a=n["c"];e.length<6?s("用户名长度必须为6到12位"):a.test(e)?t&&r.getUserExist(e).then((function(e){s(e?"用户名已存在":"")})):s("请输入合法用户名(字母开头的字母/数字任意组合)")}))},checkPass:function(e){return new Promise((function(r,t){var s=n["b"],o="";e.length<6?o="请输入6到12位长度的密码":s.test(e)||(o="含有非法字符,请重新输入"),r(o)}))},checkEmail:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(t,s){var a=n["a"];a.test(e)?r&&o["a"].axios.get("/user/emailexist?email=".concat(e)).then((function(e){e.data?t("邮箱已被使用,请绑定其他邮箱"):t("")})):t("请输入正确的邮箱地址")}))},checkPhoneNumberExist:function(e){return new Promise((function(r,t){var s=/^1([38]\d|5[0-35-9]|7[3678])\d{8}$/;s.test(e)?o["a"].axios.get("/user/phonenumberexist?phonenumber=".concat(e)).then((function(e){e.data?r(""):r("输入的手机号未注册")})):r("请输入正确的手机号")}))},checkPhoneNumber:function(e){return new Promise((function(r,t){var s=/^1([38]\d|5[0-35-9]|7[3678])\d{8}$/;s.test(e)?o["a"].axios.get("/user/phonenumberexist?phonenumber=".concat(e)).then((function(e){e.data?r("手机号已被使用,请绑定其他号码"):r("")})):r("请输入正确的手机号")}))},getUserExist:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].axios.get("/user/userexist?username=".concat(r)).then((function(e){t=e.data}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));function r(r){return e.apply(this,arguments)}return r}()}}},9645:function(e,r,t){"use strict";var s=t("dde3"),n=t.n(s);n.a},ac2a:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"form-page"},[t("van-cell-group",{staticClass:"form"},[t("form",{ref:"userForm",attrs:{method:"POST"},on:{submit:function(r){return r.preventDefault(),e.login(r)}}},[t("van-field",{attrs:{required:"",clearable:"",error:!!e.errorMsg.username,placeholder:e.errorMsg.username?e.errorMsg.username:"用户名/手机号",autofocus:"autofocus",label:"用户名","error-message":e.userForm.username?e.errorMsg.username:""},on:{focus:function(r){e.errorMsg.username=""},blur:function(r){return e.checkupForm("username")}},model:{value:e.userForm.username,callback:function(r){e.$set(e.userForm,"username",r)},expression:"userForm.username"}}),t("van-field",{attrs:{type:"password",label:"密码",error:!!e.errorMsg.password,placeholder:e.errorMsg.password?e.errorMsg.password:"请输入密码","error-message":e.userForm.password?e.errorMsg.password:"",required:""},on:{focus:function(r){e.errorMsg.password=""},blur:function(r){return e.checkupForm("password")}},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.login(r)}},model:{value:e.userForm.password,callback:function(r){e.$set(e.userForm,"password",r)},expression:"userForm.password"}}),t("div",{staticClass:"login"},[t("van-button",{attrs:{type:"info",size:"normal"},on:{click:e.login}},[e._v("登录")])],1)],1)]),t("van-row",[t("van-col",{staticClass:"bottom-buttons",attrs:{span:"12"}},[t("van-button",{staticClass:"register-buton",attrs:{size:"small",icon:"records",type:"default",to:"/register"}},[e._v("注册用户")])],1),t("van-col",{staticClass:"bottom-buttons",attrs:{span:"12"}},[t("van-button",{staticClass:"respassword-buton",attrs:{size:"small",icon:"question-o",type:"default",to:"/restpassword"}},[e._v("忘记密码")])],1)],1)],1)},n=[],o=(t("8e6e"),t("ac6a"),t("456d"),t("bd86")),a=t("2b0e"),u=t("f564"),i=t("d399"),c=t("b255"),m=t("8a1f"),f=t("2f62");function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(t,!0).forEach((function(r){Object(o["a"])(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}a["a"].use(u["a"]).use(i["a"]);var p={mixins:[m["a"]],data:function(){return{userForm:{username:"",password:""},errorMsg:{username:"",password:""}}},computed:l({},Object(f["b"])({isLogin:function(e){return e.isLogin}})),methods:{emptyErrText:function(){this.passErrorText="",this.userxErrorText=""},login:function(){this.isLogin&&this.routerReplace("/"),this.debounce(this.loginFn,500)},resetForm:function(){this.userForm={username:"",password:""}},loginFn:function(){var e=this,r=this.checkForm();if(r){this.emptyErrText();var t={username:this.userForm.username.trim(),password:this.userForm.password.trim()};i["a"].loading({mask:!0,message:"请求中...",duration:0}),this.$store.dispatch("login",t).then((function(r){r.data&&!r.data.error?(i["a"].clear(),Object(u["a"])({message:"登录成功",duration:2e3,background:"#1989fa"}),e.resetForm(),e.routerReplace("/")):(i["a"].clear(),Object(u["a"])({message:"用户名或密码错误",duration:2e3,background:"#ff4444"}))})).catch((function(e){i["a"].clear(),console.log(e),Object(u["a"])({message:"登陆失败,请重试!",duration:2e3,background:"#ff4444"})}))}},routerReplace:function(e){this.$router.push(e)},checkupForm:function(e){var r=this,t=this.userForm[e];switch(e){case"username":this.checkName(t).then((function(e){r.errorMsg.username=e}));break;case"password":this.checkPass(t).then((function(e){r.errorMsg.password=e}));break;default:break}},checkForm:function(){var e=c["c"],r=c["b"];return!(!r.test(this.userForm.password)||!e.test(this.userForm.username))||(r.test(this.userForm.password)||(this.errorMsg.password="密码错误"),e.test(this.userForm.username)||(this.errorMsg.username="用户名输入不对"),!1)},debounce:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;clearTimeout(this.timer),this.timer=setTimeout((function(){e()}),r)}}},h=p,b=(t("9645"),t("2877")),g=Object(b["a"])(h,s,n,!1,null,"1d0bea64",null);r["default"]=g.exports},b255:function(e,r,t){"use strict";t.d(r,"c",(function(){return s})),t.d(r,"b",(function(){return n})),t.d(r,"a",(function(){return o}));var s=/^\w[\d\w]{5,11}$/,n=/^[\d\w~!@#$%^&()_+=-]{6,12}$/,o=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/},dde3:function(e,r,t){}}]);