(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-084b3a00"],{"8a1f":function(e,r,t){"use strict";t("96cf");var n=t("3b8d"),s=t("b255"),a=t("2b0e");r["a"]={methods:{checkName:function(e){var r=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n,a){var o=s["c"];e.length<6?n("用户名长度必须为6到12位"):o.test(e)?t&&r.getUserExist(e).then((function(e){n(e?"用户名已存在":"")})):n("请输入合法用户名(字母开头的字母/数字任意组合)")}))},checkPass:function(e){return new Promise((function(r,t){var n=s["b"],a="";e.length<6?a="请输入6到12位长度的密码":n.test(e)||(a="含有非法字符,请重新输入"),r(a)}))},checkEmail:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(t,n){var o=s["a"];o.test(e)?r&&a["a"].axios.get("/user/emailexist?email=".concat(e)).then((function(e){e.data?t("邮箱已被使用,请绑定其他邮箱"):t("")})):t("请输入正确的邮箱地址")}))},checkPhoneNumber:function(e){return new Promise((function(r,t){var n=/^1([38]\d|5[0-35-9]|7[3678])\d{8}$/;n.test(e)?a["a"].axios.get("/user/phonenumberexist?phonenumber=".concat(e)).then((function(e){e.data?r("手机号已被使用,请绑定其他号码"):r("")})):r("请输入正确的手机号")}))},getUserExist:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].axios.get("/user/userexist?username=".concat(r)).then((function(e){t=e.data}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));function r(r){return e.apply(this,arguments)}return r}()}}},a481:function(e,r,t){"use strict";var n=t("cb7c"),s=t("4bf8"),a=t("9def"),o=t("4588"),i=t("0390"),u=t("5f1b"),c=Math.max,f=Math.min,l=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,m=/\$([$&`']|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};t("214f")("replace",2,(function(e,r,t,p){return[function(n,s){var a=e(this),o=void 0==n?void 0:n[r];return void 0!==o?o.call(n,a,s):t.call(String(a),n,s)},function(e,r){var s=p(t,e,this,r);if(s.done)return s.value;var l=n(e),d=String(this),m="function"===typeof r;m||(r=String(r));var v=l.global;if(v){var b=l.unicode;l.lastIndex=0}var w=[];while(1){var k=u(l,d);if(null===k)break;if(w.push(k),!v)break;var F=String(k[0]);""===F&&(l.lastIndex=i(d,a(l.lastIndex),b))}for(var x="",O=0,y=0;y<w.length;y++){k=w[y];for(var M=String(k[0]),j=c(f(o(k.index),d.length),0),P=[],$=1;$<k.length;$++)P.push(h(k[$]));var E=k.groups;if(m){var S=[M].concat(P,j,d);void 0!==E&&S.push(E);var z=String(r.apply(void 0,S))}else z=g(M,d,j,P,E,r);j>=O&&(x+=d.slice(O,j)+z,O=j+M.length)}return x+d.slice(O)}];function g(e,r,n,a,o,i){var u=n+e.length,c=a.length,f=m;return void 0!==o&&(o=s(o),f=d),t.call(i,f,(function(t,s){var i;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(u);case"<":i=o[s.slice(1,-1)];break;default:var f=+s;if(0===f)return t;if(f>c){var d=l(f/10);return 0===d?t:d<=c?void 0===a[d-1]?s.charAt(1):a[d-1]+s.charAt(1):t}i=a[f-1]}return void 0===i?"":i}))}}))},ac2a:function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"form-page"},[t("van-cell-group",{staticClass:"form"},[t("form",{ref:"userForm",attrs:{method:"POST"},on:{submit:function(r){return r.preventDefault(),e.login(r)}}},[t("van-field",{attrs:{required:"",clearable:"",error:!!e.errorMsg.username,placeholder:e.errorMsg.username?e.errorMsg.username:"请输入用户名",autofocus:"autofocus",label:"用户名","error-message":e.userForm.username?e.errorMsg.username:""},on:{focus:function(r){e.errorMsg.username=""},blur:function(r){return e.checkupForm("username")}},model:{value:e.userForm.username,callback:function(r){e.$set(e.userForm,"username",r)},expression:"userForm.username"}}),t("van-field",{attrs:{type:"password",label:"密码",error:!!e.errorMsg.password,placeholder:e.errorMsg.password?e.errorMsg.password:"请输入密码","error-message":e.userForm.password?e.errorMsg.password:"",required:""},on:{focus:function(r){e.errorMsg.password=""},blur:function(r){return e.checkupForm("password")}},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.login(r)}},model:{value:e.userForm.password,callback:function(r){e.$set(e.userForm,"password",r)},expression:"userForm.password"}}),t("div",{staticClass:"login"},[t("van-button",{attrs:{type:"info",size:"normal"},on:{click:e.login}},[e._v("登录")])],1)],1)])],1)},s=[],a=(t("8e6e"),t("ac6a"),t("456d"),t("a481"),t("bd86")),o=t("2b0e"),i=t("f564"),u=t("d399"),c=t("b255"),f=t("8a1f"),l=t("2f62");function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(t,!0).forEach((function(r){Object(a["a"])(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}o["a"].use(i["a"]).use(u["a"]);var h={mixins:[f["a"]],data:function(){return{userForm:{username:"",password:""},errorMsg:{username:"",password:""}}},computed:m({},Object(l["b"])({isLogin:function(e){return e.isLogin}})),methods:{emptyErrText:function(){this.passErrorText="",this.userxErrorText=""},login:function(){this.isLogin&&this.routerReplace("/"),this.debounce(this.loginFn,500)},resetForm:function(){this.userForm={username:"",password:""}},loginFn:function(){var e=this,r=this.checkForm();if(r){this.emptyErrText();var t={username:this.userForm.username.trim(),password:this.userForm.password.trim()};u["a"].loading({mask:!0,message:"请求中...",duration:0}),this.$store.dispatch("login",t).then((function(r){r.data&&!r.data.error?(u["a"].clear(),Object(i["a"])({message:"登录成功",duration:2e3,background:"#1989fa"}),e.resetForm(),e.routerReplace("/")):(u["a"].clear(),Object(i["a"])({message:"用户名或密码错误",duration:2e3,background:"#ff4444"}))})).catch((function(e){u["a"].clear(),console.log(e),Object(i["a"])({message:"登陆失败,请重试!",duration:2e3,background:"#ff4444"})}))}},routerReplace:function(e){this.$router.replace(e)},checkupForm:function(e){var r=this,t=this.userForm[e];switch(e){case"username":this.checkName(t).then((function(e){r.errorMsg.username=e}));break;case"password":this.checkPass(t).then((function(e){r.errorMsg.password=e}));break;default:break}},checkForm:function(){var e=c["c"],r=c["b"];return!(!r.test(this.userForm.password)||!e.test(this.userForm.username))||(r.test(this.userForm.password)||(this.errorMsg.password="密码错误"),e.test(this.userForm.username)||(this.errorMsg.username="用户名输入不对"),!1)},debounce:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;clearTimeout(this.timer),this.timer=setTimeout((function(){e()}),r)}}},p=h,g=(t("e9ad"),t("2877")),v=Object(g["a"])(p,n,s,!1,null,"6258025d",null);r["default"]=v.exports},afef:function(e,r,t){},b255:function(e,r,t){"use strict";t.d(r,"c",(function(){return n})),t.d(r,"b",(function(){return s})),t.d(r,"a",(function(){return a}));var n=/^\w[\d\w]{5,11}$/,s=/^[\d\w~!@#$%^&()_+=-]{6,12}$/,a=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/},e9ad:function(e,r,t){"use strict";var n=t("afef"),s=t.n(n);s.a}}]);